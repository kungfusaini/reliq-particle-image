<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reliq Particle Image - Migration Guide</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            background-color: #282c34;
            color: #abb2bf;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: #61afef;
        }
        
        .demo-container {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .demo-section {
            flex: 1;
            background: #21252b;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #3d424d;
        }
        
        .demo-title {
            color: #e06c75;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .demo-canvas {
            background: #1d2021;
            border: 2px solid #3d424d;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .code-block {
            background: #1d2021;
            padding: 15px;
            border-radius: 4px;
            border-left: 3px solid #61afef;
            margin-bottom: 15px;
            overflow-x: auto;
            white-space: pre-wrap;
            font-size: 12px;
        }
        
        .controls {
            margin-bottom: 15px;
        }
        
        button {
            background: #61afef;
            color: #282c34;
            border: none;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-family: inherit;
        }
        
        button:hover {
            background: #528bfe;
        }
        
        button:disabled {
            background: #5c6370;
            cursor: not-allowed;
        }
        
        .highlight {
            color: #98c379;
        }
        
        .comment {
            color: #5c6370;
            font-style: italic;
        }
        
        .string {
            color: #e5c07b;
        }
        
        .number {
            color: #d19a66;
        }
        
        .key {
            color: #61afef;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Reliq Enhanced Particle Image</h1>
            <p>Migration Guide: Original API vs Enhanced API</p>
        </div>
        
        <div class="demo-container">
            <!-- Original API Demo -->
            <div class="demo-section">
                <div class="demo-title">Original API</div>
                
                <div id="original-container" class="demo-canvas" style="height: 300px;"></div>
                
                <div class="controls">
                    <button id="original-init">Initialize</button>
                    <button id="original-destroy">Destroy</button>
                </div>
                
                <div class="code-block">
<span class="comment">// Original particle-image API</span>
<span class="highlight">const</span> pImg = <span class="highlight">new</span> ParticleImageDisplayer(
  <span class="string">'particle-image'</span>, 
  canvasEl, 
  params
);

<span class="comment">// Manual initialization</span>
pImg.functions.canvas.init();
pImg.functions.image.init();
pImg.functions.particles.animateParticles();
                </div>
            </div>
            
            <!-- Enhanced API Demo -->
            <div class="demo-section">
                <div class="demo-title">Enhanced API</div>
                
                <div id="enhanced-container" class="demo-canvas" style="height: 300px;"></div>
                
                <div class="controls">
                    <button id="enhanced-init">Initialize</button>
                    <button id="enhanced-destroy">Destroy</button>
                </div>
                
                <div class="code-block">
<span class="comment">// Enhanced ReliqParticleImage API</span>
<span class="highlight">const</span> particleSystem = <span class="highlight">new</span> ReliqParticleImage(
  <span class="string">'#enhanced-container'</span>, 
  {
    <span class="key">features</span>: {
      <span class="key">responsive</span>: <span class="highlight">true</span>,
      <span class="key">floating</span>: <span class="highlight">true</span>,
      <span class="key">interactivity</span>: <span class="highlight">true</span>
    },
    <span class="key">particles</span>: {
      <span class="key">color</span>: <span class="string">'#61afef'</span>,
      <span class="key">density</span>: <span class="number">80</span>
    }
  }
);

<span class="comment">// Automatic initialization</span>
particleSystem.initialize();
                </div>
            </div>
        </div>
        
        <!-- Feature Comparison -->
        <div class="demo-section">
            <div class="demo-title">Key Improvements</div>
            
            <div class="code-block">
<span class="highlight">const</span> enhancedConfig = {
  <span class="comment">// Feature Toggles (Opt-in)</span>
  <span class="key">features</span>: {
    <span class="key">responsive</span>: <span class="highlight">true</span>,        <span class="comment">// Dynamic viewport scaling</span>
    <span class="key">secondaryParticles</span>: <span class="highlight">true</span>, <span class="comment">// Background particles</span>
    <span class="key">animation</span>: <span class="highlight">true</span>,         <span class="comment">// Sprite animations</span>
    <span class="key">floating</span>: <span class="highlight">true</span>,          <span class="comment">// Sine-wave movement</span>
    <span class="key">scatter</span>: <span class="highlight">true</span>,           <span class="comment">// Explosion effects</span>
    <span class="key">fade</span>: <span class="highlight">true</span>,              <span class="comment">// Opacity transitions</span>
    <span class="key">interactivity</span>: <span class="highlight">true</span>      <span class="comment">// Touch/mouse events</span>
  },
  
  <span class="comment">// Enhanced Configuration</span>
  <span class="key">particles</span>: {
    <span class="key">responsive</span>: {
      <span class="key">enabled</span>: <span class="highlight">true</span>,
      <span class="key">breakpoints</span>: {
        <span class="key">mobile</span>: { <span class="key">max_width</span>: <span class="number">768</span>, <span class="key">multiplier</span>: <span class="number">0.6</span> },
        <span class="key">desktop</span>: { <span class="key">multiplier</span>: <span class="number">1.5</span> }
      }
    },
    <span class="key">movement</span>: {
      <span class="key">floating</span>: {
        <span class="key">amplitude</span>: <span class="number">8</span>,
        <span class="key">frequency</span>: <span class="number">0.25</span>
      }
    }
  },
  
  <span class="comment">// Secondary Particle System</span>
  <span class="key">secondary_particles</span>: {
    <span class="key">enabled</span>: <span class="highlight">true</span>,
    <span class="key">placement_mode</span>: <span class="string">'around_image'</span>,
    <span class="key">particle_multiplier</span>: <span class="number">0.075</span>,
    <span class="key">render_order</span>: <span class="string">'background'</span>
  }
};
            </div>
            
            <div class="code-block">
<span class="comment">// Modern ES6+ Features</span>
<span class="highlight">const</span> particleSystem = ReliqParticleImage.withFeatures(
  <span class="string">'#container'</span>,
  { <span class="key">responsive</span>: <span class="highlight">true</span>, <span class="key">secondaryParticles</span>: <span class="highlight">true</span> },
  config
);

<span class="comment">// Event-driven architecture</span>
document.addEventListener(<span class="string">'particleImageReady'</span>, (event) => {
  console.log(<span class="string">'Particles loaded:'</span>, event.detail);
});

<span class="comment">// Promise-based initialization</span>
particleSystem.initialize()
  .then(() => console.log(<span class="string">'Ready!'</span>))
  .catch(error => console.error(<span class="string">'Failed:'</span>, error));

<span class="comment">// Real-time statistics</span>
<span class="highlight">const</span> stats = particleSystem.getStats();
console.log(stats.totalParticles); <span class="comment">// Particle count</span>
console.log(stats.features);     <span class="comment">// Active features</span>

<span class="comment">// Runtime configuration updates</span>
particleSystem.updateConfig({
  particles: { color: <span class="string">'#ff0000'</span> }
});
            </div>
        </div>
        
        <!-- Performance Benefits -->
        <div class="demo-section">
            <div class="demo-title">Performance & Architecture Benefits</div>
            
            <div class="code-block">
✅ <span class="highlight">Modular Architecture</span>
   - Separate systems for particles, effects, interactions
   - Plugin-ready extensibility
   - Tree-shakable imports

✅ <span class="highlight">Feature Toggles</span>
   - Opt-in feature loading
   - Reduced bundle size
   - Performance optimization

✅ <span class="highlight">Modern JavaScript</span>
   - ES6+ classes and modules
   - Promise-based APIs
   - Event-driven architecture

✅ <span class="highlight">Enhanced Performance</span>
   - Frame caching for animations
   - Debounced resize handlers
   - Optimized rendering pipeline
   - Memory-efficient particle cleanup

✅ <span class="highlight">Developer Experience</span>
   - TypeScript-ready (planned)
   - Comprehensive documentation
   - Interactive examples
   - Error handling & validation

✅ <span class="highlight">Advanced Features</span>
   - Dual particle systems
   - Sprite animations with frame caching
   - Responsive viewport scaling
   - Touch-friendly interactions
   - Professional visual effects
            </div>
        </div>
    </div>

    <!-- Include original library for comparison -->
    <script src="https://cdn.jsdelivr.net/gh/paxtonfitzpatrick/particle-image/particle-image.js"></script>
    <!-- Include enhanced library -->
    <script type="module">
        import ReliqParticleImage from '../src/index.js'
        // Original API Demo
        let originalSystem = null;
        let originalCanvas = null;
        
        function initOriginal() {
            const container = document.getElementById('original-container');
            
            // Create canvas element (required for original API)
            originalCanvas = document.createElement('canvas');
            originalCanvas.style.width = '100%';
            originalCanvas.style.height = '100%';
            container.appendChild(originalCanvas);
            
            // Original configuration
            const originalConfig = {
                particles: {
                    color: '#61afef',
                    density: 80,
                    size: { value: 2, random: false },
                    movement: { speed: 8 },
                    interactivity: {
                        on_hover: { enabled: true, action: 'repulse' },
                        on_touch: { enabled: true, action: 'repulse' }
                    }
                },
                image: {
                    src: {
                        path: 'https://picsum.photos/seed/original/200/150.jpg',
                        is_external: true
                    },
                    size: { canvas_pct: 50, min_px: 100, max_px: 300 }
                },
                interactions: {
                    repulse: { distance: 60, strength: 300 }
                }
            };
            
            // Initialize original system
            originalSystem = new ParticleImageDisplayer('original-particle', originalCanvas, originalConfig);
            
            // Manual initialization sequence required by original API
            originalSystem.functions.canvas.init();
            originalSystem.functions.image.init();
        }
        
        function destroyOriginal() {
            if (originalSystem && originalCanvas) {
                originalCanvas.parentNode.removeChild(originalCanvas);
                originalSystem = null;
                originalCanvas = null;
            }
        }
        
        // Enhanced API Demo
        let enhancedSystem = null;
        
        function initEnhanced() {
            const enhancedConfig = {
                particles: {
                    color: '#61afef',
                    density: 80,
                    movement: { speed: 8 }
                },
                image: {
                    src: {
                        path: 'https://picsum.photos/seed/enhanced/200/150.jpg',
                        is_external: true
                    },
                    size: { canvas_pct: 50, min_px: 100, max_px: 300 }
                },
                features: {
                    responsive: false,
                    secondaryParticles: false,
                    animation: false,
                    floating: false,
                    scatter: false,
                    fade: false,
                    interactivity: true
                }
            };
            
            enhancedSystem = new ReliqParticleImage('#enhanced-container', enhancedConfig);
            enhancedSystem.initialize();
        }
        
        function destroyEnhanced() {
            if (enhancedSystem) {
                enhancedSystem.destroy();
                enhancedSystem = null;
            }
        }
        
        // Event listeners
        document.getElementById('original-init').addEventListener('click', initOriginal);
        document.getElementById('original-destroy').addEventListener('click', destroyOriginal);
        document.getElementById('enhanced-init').addEventListener('click', initEnhanced);
        document.getElementById('enhanced-destroy').addEventListener('click', destroyEnhanced);
        
        // Auto-initialize demos
        window.addEventListener('load', () => {
            setTimeout(() => {
                initOriginal();
                initEnhanced();
            }, 100);
        });
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            destroyOriginal();
            destroyEnhanced();
        });
    </script>
</body>
</html>
